(()=>{var e={};e.id=3321,e.ids=[3321],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8819:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24354:(e,t,a)=>{"use strict";a.d(t,{BG:()=>d,Vt:()=>s,uU:()=>c});var r=a(43210);let s="Africa/Tunis",i={fr:{active:"Actif",inactive:"Inactif",unknown_date:"Date inconnue",invalid_date:"Date invalide",loading:"Chargement...",cancel:"Annuler",save:"Sauver",edit:"Modifier",urgent:"Urgent",space:"Espace",role_admin:"Admin",role_manager:"Manager",role_employee:"Employ\xe9",nav:"Navigation",header_title_admin:"Administration",header_title_manager:"Management",header_title_employee:"Espace Employ\xe9",header_subtitle:"Tableau de bord Red Castle",notifications:"Notifications",profile:"Profil",settings:"Param\xe8tres",logout:"D\xe9connexion",notif_title:"\uD83D\uDD14 Approbations en attente",no_notifications:"✨ Aucune notification",schedule_change:"\uD83D\uDCC5 Changement de planning",date_unknown:"Date inconnue",received_at_prefix:"Re\xe7u le",admin_title:"Administration Red Castle",admin_subtitle:"Tableau de bord administrateur - Vue d'ensemble",system_active:"Syst\xe8me actif",last_update_now:"Derni\xe8re mise \xe0 jour: maintenant",stat_total_employees:"Total Employ\xe9s",stat_all_restaurants:"Tous restaurants",stat_active_locations:"Restaurants Actifs",stat_locations_open:"Locations ouvertes",stat_revenue:"Chiffre d'Affaires",stat_this_month:"Ce mois",stat_approvals:"Approbations",stat_pending:"En attente",chart_global_perf:"Performance Globale",chart_global_perf_desc:"\xc9volution du chiffre d'affaires et des effectifs",chart_perf_by_location:"Performance par Restaurant",chart_perf_by_location_desc:"Chiffre d'affaires mensuel par location",restaurants_manage:"Gestion des Restaurants",restaurants_overview:"Vue d'ensemble de tous les restaurants Red Castle",employees:"Employ\xe9s",monthly_revenue:"CA Mensuel",performance:"Performance",recent_activities:"Activit\xe9s R\xe9centes",recent_activities_desc:"Derni\xe8res actions n\xe9cessitant votre attention",loading_activities:"Chargement des activit\xe9s...",error_loading_activities:"Erreur lors du chargement des activit\xe9s",no_recent_activity:"Aucune activit\xe9 r\xe9cente",m_jan:"Jan",m_feb:"F\xe9v",m_mar:"Mar",m_apr:"Avr",m_may:"Mai",m_jun:"Jun",personal_info:"Informations Personnelles",full_name:"Nom Complet",job_title:"Poste",status:"Statut",hire_date:"Date d'embauche",financial_info:"Informations Financi\xe8res",salary:"Salaire",bonus:"Prime",advance:"Avance",net_salary_est:"Salaire Net Estim\xe9",performance_title:"Performance",overall_performance:"Performance globale",excellent:"Excellent",good:"Bon",needs_improvement:"\xc0 am\xe9liorer",worked_hours:"Heures travaill\xe9es",sessions:"Sessions",disciplinary_data:"Donn\xe9es Disciplinaires",infractions:"Infractions",absences:"Absences",delays:"Retards",uniforms:"Tenues de travail",recent_activity:"Activit\xe9 R\xe9cente",recent_sessions:"Derni\xe8res sessions de travail",in_progress:"En cours",done:"Termin\xe9",contracts:"Contrats",contract_prefix:"Contrat",from:"Du",to:"au",uniforms_count:"tenues",active_session:"Session active",sessions_done:"Sessions termin\xe9es",punch_title:"Pointeuse",punch_subtitle:"G\xe9rez vos heures de travail",current_status:"Statut Actuel",on_duty:"En service",off_duty:"Hors service",check_in:"Pointage d’arriv\xe9e",check_out:"Pointage de d\xe9part",arrived_at:"Arriv\xe9e",working_time:"Temps de travail",position:"Position",punch_in_btn:"Pointer l'arriv\xe9e",punch_out_btn:"Pointer le d\xe9part",today_summary:"R\xe9sum\xe9 du jour",today_history:"Historique du jour",unknown_status:"Statut inconnu",geo_warning:"La g\xe9olocalisation n'est pas disponible. Certaines fonctionnalit\xe9s peuvent \xeatre limit\xe9es.",toast_checkin_success:"Vous avez point\xe9 votre arriv\xe9e avec succ\xe8s",toast_checkout_success:"Vous avez point\xe9 votre d\xe9part avec succ\xe8s",toast_error:"Erreur",toast_checkin_error:"Erreur lors du pointage d'arriv\xe9e",toast_checkout_error:"Erreur lors du pointage de d\xe9part",toast_update_success:"Employ\xe9 mis \xe0 jour avec succ\xe8s",toast_update_error:"Erreur lors de la mise \xe0 jour"},ar:{active:"نشط",inactive:"غير نشط",unknown_date:"تاريخ غير معروف",invalid_date:"تاريخ غير صالح",loading:"جاري التحميل...",cancel:"إلغاء",save:"حفظ",edit:"تعديل",urgent:"عاجل",space:"مساحة",role_admin:"مدير",role_manager:"مشرف",role_employee:"موظف",nav:"التنقل",header_title_admin:"الإدارة",header_title_manager:"الإشراف",header_title_employee:"مساحة الموظف",header_subtitle:"لوحة تحكم ريد كاسل",notifications:"الإشعارات",profile:"الملف الشخصي",settings:"الإعدادات",logout:"تسجيل الخروج",notif_title:"\uD83D\uDD14 موافقات قيد الانتظار",no_notifications:"✨ لا توجد إشعارات",schedule_change:"\uD83D\uDCC5 تغيير الجدول",date_unknown:"تاريخ غير معروف",received_at_prefix:"تم الاستلام في",admin_title:"إدارة ريد كاسل",admin_subtitle:"لوحة تحكم المدير - نظرة عامة",system_active:"النظام نشط",last_update_now:"آخر تحديث: الآن",stat_total_employees:"إجمالي الموظفين",stat_all_restaurants:"جميع المطاعم",stat_active_locations:"المطاعم النشطة",stat_locations_open:"الفروع المفتوحة",stat_revenue:"رقم المعاملات",stat_this_month:"هذا الشهر",stat_approvals:"الموافقات",stat_pending:"قيد الانتظار",chart_global_perf:"الأداء العام",chart_global_perf_desc:"تطور رقم المعاملات وعدد الموظفين",chart_perf_by_location:"الأداء حسب المطعم",chart_perf_by_location_desc:"رقم المعاملات الشهري لكل موقع",restaurants_manage:"إدارة المطاعم",restaurants_overview:"نظرة عامة على جميع مطاعم ريد كاسل",employees:"الموظفون",monthly_revenue:"المعاملات الشهرية",performance:"الأداء",recent_activities:"الأنشطة الأخيرة",recent_activities_desc:"أحدث الإجراءات التي تتطلب اهتمامك",loading_activities:"جاري تحميل الأنشطة...",error_loading_activities:"حدث خطأ أثناء تحميل الأنشطة",no_recent_activity:"لا توجد أنشطة حديثة",m_jan:"جان",m_feb:"فيف",m_mar:"مار",m_apr:"أف",m_may:"ماي",m_jun:"جون",personal_info:"المعلومات الشخصية",full_name:"الاسم الكامل",job_title:"المنصب",status:"الحالة",hire_date:"تاريخ التوظيف",financial_info:"المعلومات المالية",salary:"الراتب",bonus:"منحة",advance:"سلفة",net_salary_est:"صافي الراتب التقديري",performance_title:"الأداء",overall_performance:"الأداء العام",excellent:"ممتاز",good:"جيد",needs_improvement:"بحاجة لتحسين",worked_hours:"ساعات العمل",sessions:"الجلسات",disciplinary_data:"البيانات التأديبية",infractions:"مخالفات",absences:"غيابات",delays:"تأخيرات",uniforms:"أزياء العمل",recent_activity:"النشاط الأخير",recent_sessions:"آخر جلسات العمل",in_progress:"قيد العمل",done:"منتهي",contracts:"العقود",contract_prefix:"عقد",from:"من",to:"إلى",uniforms_count:"أزياء",active_session:"جلسة نشطة",sessions_done:"الجلسات المكتملة",punch_title:"آلة تسجيل الوقت",punch_subtitle:"إدارة ساعات عملك",current_status:"الحالة الحالية",on_duty:"على رأس العمل",off_duty:"خارج العمل",check_in:"تسجيل الوصول",check_out:"تسجيل الانصراف",arrived_at:"وقت الوصول",working_time:"وقت العمل",position:"الموقع",punch_in_btn:"تسجيل الوصول",punch_out_btn:"تسجيل الانصراف",today_summary:"ملخص اليوم",today_history:"سجل اليوم",unknown_status:"حالة غير معروفة",geo_warning:"خدمة تحديد الموقع غير متاحة. قد تكون بعض الميزات محدودة.",toast_checkin_success:"تم تسجيل وصولك بنجاح",toast_checkout_success:"تم تسجيل انصرافك بنجاح",toast_error:"خطأ",toast_checkin_error:"حدث خطأ أثناء تسجيل الوصول",toast_checkout_error:"حدث خطأ أثناء تسجيل الانصراف",toast_update_success:"تم تحديث الموظف بنجاح",toast_update_error:"حدث خطأ أثناء التحديث"}};function n(e){return"ar"===e?"ar-TN":"fr-TN"}function o(e){return e instanceof Date?e:new Date(e)}function l(e,t){return{...e??{},timeZone:e?.timeZone??t??s}}function d(e=new Date,t=s){let a=o(e);return new Intl.DateTimeFormat("en-CA",l({year:"numeric",month:"2-digit",day:"2-digit"},t)).format(a)}function c(e="fr"){let[t,a]=(0,r.useState)(e),d=(0,r.useCallback)(e=>{let t="ar"===e?"ar":"fr";a(t),function(e){if("undefined"==typeof document)return;let t=document.documentElement;t.lang=e,t.dir="ltr"}(t)},[]),m=(0,r.useCallback)((e,a)=>{let r=i[t];return r&&r[e]||a||e},[t]),u=n(t),p=(0,r.useCallback)((e,a)=>(function(e,t,a,r){let s=o(e);return isNaN(s.getTime())?"":new Intl.DateTimeFormat(n(t),l(a,r)).format(s)})(e,t,a,s),[t,s]),h=(0,r.useCallback)((e,a)=>(function(e,t,a,r){let s=o(e);return isNaN(s.getTime())?"":new Intl.DateTimeFormat(n(t),l({hour:"2-digit",minute:"2-digit",second:"2-digit",...a??{}},r)).format(s)})(e,t,a,s),[t,s]),f=(0,r.useCallback)((e,a)=>new Intl.NumberFormat(n(t),a).format(Number.isFinite(e)?e:0),[t]),b=(0,r.useCallback)((e,a="TND",r=0)=>(function(e,t,a="TND",r=0){return new Intl.NumberFormat(n(t),{style:"currency",currency:a,currencyDisplay:"narrowSymbol",maximumFractionDigits:r}).format(Number.isFinite(e)?e:0)})(e,t,a,r),[t]);return{lang:t,t:m,locale:u,timeZone:s,setLang:d,formatDate:p,formatTime:h,formatNumber:f,formatCurrency:b}}},27021:(e,t,a)=>{Promise.resolve().then(a.bind(a,38670))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},38670:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/monta/rabota/work3/redcastel/app/dashboard/manager/journal/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/monta/rabota/work3/redcastel/app/dashboard/manager/journal/page.tsx","default")},51197:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(65239),s=a(48088),i=a(88170),n=a.n(i),o=a(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let d={children:["",{children:["dashboard",{children:["manager",{children:["journal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,38670)),"/home/monta/rabota/work3/redcastel/app/dashboard/manager/journal/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,83249)),"/home/monta/rabota/work3/redcastel/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/home/monta/rabota/work3/redcastel/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/monta/rabota/work3/redcastel/app/dashboard/manager/journal/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/dashboard/manager/journal/page",pathname:"/dashboard/manager/journal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55192:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o});var r=a(60687),s=a(43210),i=a(96241);let n=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>b,gC:()=>f,l6:()=>c,yv:()=>m});var r=a(60687),s=a(43210),i=a(72951),n=a(78272),o=a(3589),l=a(13964),d=a(96241);let c=i.bL;i.YJ;let m=i.WT,u=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(i.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,(0,r.jsx)(i.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=i.l9.displayName;let p=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(i.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}));p.displayName=i.PP.displayName;let h=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(i.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=i.wn.displayName;let f=s.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[(0,r.jsx)(p,{}),(0,r.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(h,{})]})}));f.displayName=i.UC.displayName,s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(i.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.JU.displayName;let b=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(i.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:t})]}));b.displayName=i.q7.displayName,s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(i.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.wv.displayName},74285:(e,t,a)=>{Promise.resolve().then(a.bind(a,95360))},95360:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(60687),s=a(43210),i=a(55192),n=a(24934),o=a(59821),l=a(70373),d=a(63974),c=a(40228),m=a(41312),u=a(48730),p=a(8819),h=a(71702),f=a(1797),b=a(15728),g=a(50848),x=a(24354),_=a(45126);let y={fr:{headerTitle:"Journal Manager",headerSubtitle:"Proposez les plannings de votre \xe9quipe \xe0 l'administrateur",weeklyTitle:"Planning Hebdomadaire",weeklyDesc:"Horaires de travail par employ\xe9 et par jour",employeeColumn:"Employ\xe9",employeesTitle:"Employ\xe9s",employeesDesc:"Cliquez sur un employ\xe9 pour proposer son planning",editorTitle:e=>`Planning de ${e}`,editorSubtitle:"D\xe9finissez les horaires de travail pour la semaine et le poste",positionForWeek:"Poste pour cette semaine",selectPosition:"S\xe9lectionner un poste",selectSlot:"S\xe9lectionner un cr\xe9neau",dayMonday:"Lundi",dayTuesday:"Mardi",dayWednesday:"Mercredi",dayThursday:"Jeudi",dayFriday:"Vendredi",daySaturday:"Samedi",daySunday:"Dimanche",shiftMorningName:"Matin",shiftEveningName:"Soir\xe9e",shiftDoubleName:"Doublage",shiftOffName:"Repos",shiftMorningLabel:"Matin (09:00 - 18:00)",shiftEveningLabel:"Soir\xe9e (18:00 - 03:00)",shiftDoubleLabel:"Doublage (09:00 - 03:00)",shiftOffLabel:"Repos",btnPropose:"Proposer le Planning",toastMissingEmployeeTitle:"Erreur",toastMissingEmployeeDesc:"Veuillez s\xe9lectionner un employ\xe9",toastProposedTitle:"Planning envoy\xe9 \xe0 l'admin pour approbation",toastProposedDesc:"Le planning a \xe9t\xe9 propos\xe9 avec succ\xe8s",toastErrorTitle:"Erreur",toastErrorDesc:"Impossible d'envoyer le planning",loadingTitle:"Chargement des donn\xe9es…",loadingSubtitle:"Veuillez patienter pendant le chargement",errorTitle:"Erreur de chargement des donn\xe9es",errorMissingDataTitle:"Erreur: Donn\xe9es manquantes du serveur",errorMissingDataDesc:"V\xe9rifiez la connexion \xe0 la base de donn\xe9es ou contactez l'administrateur."},ar:{headerTitle:"دفتر مدير",headerSubtitle:"اقترح جداول فريقك على المشرف",weeklyTitle:"الجدول الأسبوعي",weeklyDesc:"ساعات العمل لكل موظف ولكل يوم",employeeColumn:"الموظف",employeesTitle:"الموظفون",employeesDesc:"انقر على موظف لاقتراح جدوله",editorTitle:e=>`جدول ${e}`,editorSubtitle:"حدد ساعات العمل للأسبوع والمنصب",positionForWeek:"المنصب لهذا الأسبوع",selectPosition:"اختر المنصب",selectSlot:"اختر الفترة",dayMonday:"الاثنين",dayTuesday:"الثلاثاء",dayWednesday:"الأربعاء",dayThursday:"الخميس",dayFriday:"الجمعة",daySaturday:"السبت",daySunday:"الأحد",shiftMorningName:"صباحي",shiftEveningName:"مسائي",shiftDoubleName:"مضاعف",shiftOffName:"راحة",shiftMorningLabel:"صباحي (09:00 - 18:00)",shiftEveningLabel:"مسائي (18:00 - 03:00)",shiftDoubleLabel:"مضاعف (09:00 - 03:00)",shiftOffLabel:"راحة",btnPropose:"اقتراح الجدول",toastMissingEmployeeTitle:"خطأ",toastMissingEmployeeDesc:"يرجى اختيار موظف",toastProposedTitle:"تم إرسال الجدول للمشرف",toastProposedDesc:"تم اقتراح الجدول بنجاح",toastErrorTitle:"خطأ",toastErrorDesc:"تعذّر إرسال الجدول",loadingTitle:"جارٍ تحميل البيانات…",loadingSubtitle:"يرجى الانتظار أثناء التحميل",errorTitle:"حدث خطأ أثناء تحميل البيانات",errorMissingDataTitle:"خطأ: بيانات مفقودة من الخادم",errorMissingDataDesc:"تحقق من الاتصال بقاعدة البيانات أو تواصل مع المشرف."}},v="Matin",j="Soir\xe9e",w="Doublage",N="Repos";function k(){let{lang:e,formatDate:t}=(0,x.uU)(),a=y[e],{toast:k}=(0,h.dj)(),{user:D}=(0,_.A)(),[T,P]=(0,s.useState)(""),[C,E]=(0,s.useState)({}),[S,M]=(0,s.useState)(""),A=(0,s.useMemo)(()=>[{key:"monday",label:a.dayMonday},{key:"tuesday",label:a.dayTuesday},{key:"wednesday",label:a.dayWednesday},{key:"thursday",label:a.dayThursday},{key:"friday",label:a.dayFriday},{key:"saturday",label:a.daySaturday},{key:"sunday",label:a.daySunday}],[a]),R=(0,s.useMemo)(()=>[{value:v,label:a.shiftMorningLabel},{value:j,label:a.shiftEveningLabel},{value:w,label:a.shiftDoubleLabel},{value:N,label:a.shiftOffLabel}],[a]),{data:L}=(0,f.I)(g.Yh),q=(0,s.useMemo)(()=>L?.locations&&D?.location_id?L.locations.find(e=>e.id===D.location_id):null,[L,D?.location_id]),{data:z,error:I,loading:F}=(0,f.I)(g.dO),{data:$,error:V,loading:Z,refetch:W}=(0,f.I)(g.G0),[B]=(0,b.n)(g.pY),[H]=(0,b.n)(g.ZU),O=e=>e===v?a.shiftMorningName:e===j?a.shiftEveningName:e===w?a.shiftDoubleName:a.shiftOffName,G=(e,t)=>{E(a=>({...a,[e]:t}))},J=e=>t=>{G(e,t)},U=(0,s.useMemo)(()=>z?.employees&&q?z.employees.filter(e=>e.location?.id===q.id).map(e=>({id:e.id,name:`${e.prenom} ${e.nom}`,position:e.job_title,job_title:e.job_title,prenom:e.prenom,nom:e.nom,location:e.location?.name||""})):[],[z,q]),Y=U.find(e=>e.id===T);async function K(){if(!T){k({title:a.toastMissingEmployeeTitle,description:a.toastMissingEmployeeDesc,variant:"destructive"});return}if(!D?.username){k({title:a.toastErrorTitle,description:"Manager information not available",variant:"destructive"});return}try{let e=(await Promise.all(A.map(async e=>{let t=C[e.key];if(!t)return null;let a=new Date,r=A.findIndex(t=>t.key===e.key),s=new Date(a);s.setDate(a.getDate()-a.getDay()+1);let i=new Date(s);i.setDate(s.getDate()+r);let n=i.toISOString().split("T")[0],o=null,l=null;t===v?(o="09:00",l="18:00"):t===j?(o="18:00",l="03:00"):t===w&&(o="09:00",l="03:00");let d=await B({variables:{employee_id:T,date:n,shift_type:t,job_position:Y?.job_title||"",is_working:t!==N,start_time:o,end_time:l,status:"manager",trait:"manager"}});return d?.data?.createManagerWorkSchedule?.id||null}))).find(e=>null!==e)||null;await H({variables:{type:"schedule_change",reference_id:e,manager_id:D.id,data:JSON.stringify({schedule:C,employee_id:T,employee_name:Y?.name,manager_username:D.username,tableName:`${D.username.toLowerCase()}_manager_${T}`,location:q?.name})}}),k({title:a.toastProposedTitle,description:a.toastProposedDesc}),E({}),M(""),W()}catch(e){console.error("Error proposing schedule:",e),k({title:a.toastErrorTitle,description:a.toastErrorDesc,variant:"destructive"})}}return I||V?(0,r.jsxs)("div",{className:"p-8 text-center text-red-600",children:[(0,r.jsx)("h2",{className:"font-semibold mb-1",dir:"auto",children:a.errorTitle}),(0,r.jsx)("p",{children:I?.message||V?.message})]}):F||Z?(0,r.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[(0,r.jsx)("h2",{className:"text-white/90 font-semibold mb-1",dir:"auto",children:a.loadingTitle}),(0,r.jsx)("p",{dir:"auto",children:a.loadingSubtitle})]}):z?.employees?0===U.length?(0,r.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[(0,r.jsx)("h2",{className:"text-white/90 font-semibold mb-1",dir:"auto",children:"Aucun employ\xe9 trouv\xe9"}),(0,r.jsxs)("p",{dir:"auto",children:["Aucun employ\xe9 n'est assign\xe9 \xe0 votre restaurant (",q?.name||"Non d\xe9fini",")"]})]}):(0,r.jsxs)("div",{className:"min-h-screen relative overflow-hidden animate-fade-in",children:[(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-0",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/80 via-blue-900/60 to-slate-900/80 backdrop-blur-[6px]"}),[...Array(20)].map((e,t)=>(0,r.jsx)("div",{className:"absolute w-1 h-1 bg-gradient-to-r from-blue-400 to-green-400 rounded-full opacity-30 animate-float",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`,animationDelay:`${6*Math.random()}s`,animationDuration:`${6+4*Math.random()}s`}},t))]}),(0,r.jsxs)("div",{className:"space-y-8 p-3 sm:p-4 lg:p-6 relative z-20 max-w-screen-xl mx-auto",children:[(0,r.jsxs)("div",{className:"glass-card backdrop-blur-futuristic p-4 sm:p-6 lg:p-8 text-white shadow-2xl animate-fade-in relative overflow-hidden border border-white/10",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/30 via-green-900/40 to-blue-900/30 opacity-70 rounded-2xl"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] animate-[shimmer_3s_ease-in-out_infinite] rounded-2xl"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-700/40 to-green-700/40 rounded-xl flex items-center justify-center border border-white/10",children:(0,r.jsx)(c.A,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-1 bg-gradient-to-r from-white via-blue-200 to-green-200 bg-clip-text text-transparent",dir:"auto",children:a.headerTitle}),(0,r.jsx)("p",{className:"text-slate-200 text-sm md:text-base",dir:"auto",children:a.headerSubtitle}),(0,r.jsxs)("p",{className:"text-blue-300 text-xs mt-1",dir:"auto",children:["Restaurant: ",q?.name||"Non d\xe9fini"]})]})]})]}),(0,r.jsxs)(i.Zp,{className:"glass-card backdrop-blur-futuristic border border-white/10 shadow-2xl bg-gradient-to-br from-slate-900/70 via-blue-900/60 to-slate-900/70",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)(i.ZB,{className:"text-white",dir:"auto",children:a.weeklyTitle}),(0,r.jsx)(i.BT,{className:"text-blue-200",dir:"auto",children:a.weeklyDesc})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-white/10",children:[(0,r.jsx)("th",{className:"p-3 font-semibold text-white text-left",dir:"auto",children:a.employeeColumn}),A.map(e=>(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-white",dir:"auto",children:e.label},e.key))]})}),(0,r.jsx)("tbody",{children:U.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/10 hover:bg-blue-900/30",children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.eu,{className:"w-8 h-8",children:(0,r.jsx)(l.q5,{className:"text-xs bg-gradient-to-br from-blue-700/40 to-green-700/40 text-white",children:e.name.split(" ").map(e=>e[0]).join("")})}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm text-white truncate",dir:"auto",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-blue-200 truncate",dir:"auto",children:e.position})]})]})}),A.map(t=>{let a=function(e,t){if(!$?.workSchedules)return null;let a=new Date,r=A.findIndex(e=>e.key===t),s=new Date(a);s.setDate(a.getDate()-a.getDay()+1);let i=new Date(s);i.setDate(s.getDate()+r),i.setHours(0,0,0,0);let n=$.workSchedules.find(t=>{let a;return t.employee_id===e&&((a=new Date(/^\d+$/.test(String(t.date))?Number(t.date):t.date)).setHours(0,0,0,0),a.getTime()===i.getTime())});return n?{shift:n.shift_type,job:n.job_position}:null}(e.id,t.key),s=a?.shift;return(0,r.jsx)("td",{className:"p-3 text-center",children:s?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)(o.E,{className:`text-xs glass-card border border-white/10 ${s===v?"bg-blue-600/80 text-white":s===j?"bg-purple-600/80 text-white":s===w?"bg-orange-600/80 text-white":"bg-slate-700/80 text-blue-200"}`,dir:"auto",children:O(s)}),(0,r.jsx)("span",{className:"text-xs text-blue-200 truncate",dir:"auto",children:a?.job||""})]}):(0,r.jsx)("span",{className:"text-xs text-blue-200",children:"-"})},t.key)})]},e.id))})]})})})]}),(0,r.jsxs)(i.Zp,{className:"glass-card backdrop-blur-futuristic border border-white/10 shadow-2xl bg-gradient-to-br from-slate-900/70 via-blue-900/60 to-slate-900/70",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsxs)(i.ZB,{className:"flex items-center text-white",dir:"auto",children:[(0,r.jsx)(m.A,{className:"w-5 h-5 mr-2"}),a.employeesTitle]}),(0,r.jsx)(i.BT,{className:"text-blue-200",dir:"auto",children:a.employeesDesc})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(e=>(0,r.jsx)("div",{className:`border border-white/10 rounded-xl p-4 cursor-pointer transition-colors glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 ${T===e.id?"ring-2 ring-primary border-primary":"hover:bg-blue-900/60"}`,onClick:()=>P(e.id),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.eu,{className:"w-10 h-10",children:(0,r.jsxs)(l.q5,{className:"bg-gradient-to-br from-blue-700/40 to-green-700/40 text-white",children:[e.prenom[0],e.nom[0]]})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("h4",{className:"font-medium truncate text-white",dir:"auto",children:[e.prenom," ",e.nom]}),(0,r.jsx)("p",{className:"text-sm text-blue-200 truncate",dir:"auto",children:e.job_title})]})]})},e.id))})})]}),Y&&(0,r.jsxs)(i.Zp,{className:"glass-card backdrop-blur-futuristic border border-white/10 shadow-2xl bg-gradient-to-br from-slate-900/70 via-blue-900/60 to-slate-900/70",children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsxs)(i.ZB,{className:"flex items-center text-white",dir:"auto",children:[(0,r.jsx)(u.A,{className:"w-5 h-5 mr-2"}),a.editorTitle(`${Y.prenom} ${Y.nom}`)]}),(0,r.jsx)(i.BT,{className:"text-blue-200",dir:"auto",children:a.editorSubtitle})]}),(0,r.jsxs)(i.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1 text-white",dir:"auto",children:a.positionForWeek}),(0,r.jsxs)(d.l6,{value:S||Y.job_title,onValueChange:M,children:[(0,r.jsx)(d.bq,{className:"glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white",children:(0,r.jsx)(d.yv,{placeholder:a.selectPosition})}),(0,r.jsx)(d.gC,{className:"glass-card bg-gradient-to-br from-blue-900/80 to-green-900/80 border border-white/10 text-white",children:Array.from(new Set((U||[]).map(e=>e.job_title).filter(Boolean))).map(e=>(0,r.jsx)(d.eb,{value:String(e),children:String(e)},String(e)))})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4",children:A.map(e=>(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4 p-4 border border-white/10 rounded-lg glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40",children:[(0,r.jsxs)("div",{className:"md:w-48",children:[(0,r.jsx)("span",{className:"font-medium text-white",dir:"auto",children:e.label}),(0,r.jsx)("span",{className:"ml-2 text-xs text-blue-200",dir:"auto",children:function(e){let a=new Date,r=A.findIndex(t=>t.key===e),s=new Date(a);s.setDate(a.getDate()-a.getDay()+1);let i=new Date(s);return i.setDate(s.getDate()+r),t(i,{year:"numeric",month:"2-digit",day:"2-digit"})}(e.key)})]}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)(d.l6,{value:C[e.key]||"",onValueChange:J(e.key),children:[(0,r.jsx)(d.bq,{className:"glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white",children:(0,r.jsx)(d.yv,{placeholder:a.selectSlot})}),(0,r.jsx)(d.gC,{className:"glass-card bg-gradient-to-br from-blue-900/80 to-green-900/80 border border-white/10 text-white",children:R.map(e=>(0,r.jsx)(d.eb,{value:e.value,children:e.label},e.value))})]})}),C[e.key]&&(0,r.jsx)(o.E,{className:`glass-card border border-white/10 text-xs ${C[e.key]===N?"bg-slate-700/80 text-blue-200":"bg-green-600/80 text-white"}`,dir:"auto",children:O(C[e.key])})]},e.key))}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(n.$,{onClick:K,className:"glass-card bg-gradient-to-br from-green-700/40 to-blue-700/40 text-white border border-white/10 shadow",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),a.btnPropose]})})]})]})]})]}):(0,r.jsxs)("div",{className:"p-8 text-center text-red-600",children:[(0,r.jsx)("h2",{className:"font-semibold mb-1",dir:"auto",children:a.errorMissingDataTitle}),(0,r.jsx)("p",{dir:"auto",children:a.errorMissingDataDesc})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[7719,9922,4774,5806,4803,1536,972,4537],()=>a(51197));module.exports=r})();