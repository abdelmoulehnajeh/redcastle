(()=>{var e={};e.id=5729,e.ids=[5729],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19166:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/monta/rabota/work3/redcastel/app/dashboard/admin/journal/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/monta/rabota/work3/redcastel/app/dashboard/admin/journal/page.tsx","default")},23717:(e,t,a)=>{Promise.resolve().then(a.bind(a,77008))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37826:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>x,HM:()=>u,L3:()=>f,c7:()=>h,lG:()=>o,rr:()=>g,zM:()=>d});var r=a(60687),s=a(43210),l=a(26134),i=a(11860),n=a(96241);let o=l.bL,d=l.l9,c=l.ZL,u=l.bm,p=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.hJ,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));p.displayName=l.hJ.displayName;let m=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(c,{children:[(0,r.jsx)(p,{}),(0,r.jsxs)(l.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=l.UC.displayName;let h=({className:e,...t})=>(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});h.displayName="DialogHeader";let x=({className:e,...t})=>(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let f=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));f.displayName=l.hE.displayName;let g=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));g.displayName=l.VY.displayName},43649:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(62688).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},47033:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(62688).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},48789:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=a(65239),s=a(48088),l=a(88170),i=a.n(l),n=a(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d={children:["",{children:["dashboard",{children:["admin",{children:["journal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,19166)),"/home/monta/rabota/work3/redcastel/app/dashboard/admin/journal/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,83249)),"/home/monta/rabota/work3/redcastel/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/home/monta/rabota/work3/redcastel/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/monta/rabota/work3/redcastel/app/dashboard/admin/journal/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/dashboard/admin/journal/page",pathname:"/dashboard/admin/journal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55192:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var r=a(60687),s=a(43210),l=a(96241);let i=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let n=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let o=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},61240:(e,t,a)=>{"use strict";a.d(t,{AM:()=>B,hl:()=>G,Wv:()=>V});var r=a(60687),s=a(43210),l=a(70569),i=a(98599),n=a(11273),o=a(31355),d=a(1359),c=a(32547),u=a(96963),p=a(55509),m=a(25028),h=a(46059),x=a(14163),f=a(8730),g=a(65551),b=a(63376),v=a(11490),y="Popover",[j,w]=(0,n.A)(y,[p.Bk]),N=(0,p.Bk)(),[S,k]=j(y),_=e=>{let{__scopePopover:t,children:a,open:l,defaultOpen:i,onOpenChange:n,modal:o=!1}=e,d=N(t),c=s.useRef(null),[m,h]=s.useState(!1),[x,f]=(0,g.i)({prop:l,defaultProp:i??!1,onChange:n,caller:y});return(0,r.jsx)(p.bL,{...d,children:(0,r.jsx)(S,{scope:t,contentId:(0,u.B)(),triggerRef:c,open:x,onOpenChange:f,onOpenToggle:s.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:m,onCustomAnchorAdd:s.useCallback(()=>h(!0),[]),onCustomAnchorRemove:s.useCallback(()=>h(!1),[]),modal:o,children:a})})};_.displayName=y;var R="PopoverAnchor";s.forwardRef((e,t)=>{let{__scopePopover:a,...l}=e,i=k(R,a),n=N(a),{onCustomAnchorAdd:o,onCustomAnchorRemove:d}=i;return s.useEffect(()=>(o(),()=>d()),[o,d]),(0,r.jsx)(p.Mz,{...n,...l,ref:t})}).displayName=R;var D="PopoverTrigger",C=s.forwardRef((e,t)=>{let{__scopePopover:a,...s}=e,n=k(D,a),o=N(a),d=(0,i.s)(t,n.triggerRef),c=(0,r.jsx)(x.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":I(n.open),...s,ref:d,onClick:(0,l.mK)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?c:(0,r.jsx)(p.Mz,{asChild:!0,...o,children:c})});C.displayName=D;var P="PopoverPortal",[E,M]=j(P,{forceMount:void 0}),A=e=>{let{__scopePopover:t,forceMount:a,children:s,container:l}=e,i=k(P,t);return(0,r.jsx)(E,{scope:t,forceMount:a,children:(0,r.jsx)(h.C,{present:a||i.open,children:(0,r.jsx)(m.Z,{asChild:!0,container:l,children:s})})})};A.displayName=P;var O="PopoverContent",T=s.forwardRef((e,t)=>{let a=M(O,e.__scopePopover),{forceMount:s=a.forceMount,...l}=e,i=k(O,e.__scopePopover);return(0,r.jsx)(h.C,{present:s||i.open,children:i.modal?(0,r.jsx)(z,{...l,ref:t}):(0,r.jsx)(F,{...l,ref:t})})});T.displayName=O;var $=(0,f.TL)("PopoverContent.RemoveScroll"),z=s.forwardRef((e,t)=>{let a=k(O,e.__scopePopover),n=s.useRef(null),o=(0,i.s)(t,n),d=s.useRef(!1);return s.useEffect(()=>{let e=n.current;if(e)return(0,b.Eq)(e)},[]),(0,r.jsx)(v.A,{as:$,allowPinchZoom:!0,children:(0,r.jsx)(L,{...e,ref:o,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,l.mK)(e.onCloseAutoFocus,e=>{e.preventDefault(),d.current||a.triggerRef.current?.focus()}),onPointerDownOutside:(0,l.mK)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;d.current=2===t.button||a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,l.mK)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),F=s.forwardRef((e,t)=>{let a=k(O,e.__scopePopover),l=s.useRef(!1),i=s.useRef(!1);return(0,r.jsx)(L,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(l.current||a.triggerRef.current?.focus(),t.preventDefault()),l.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(l.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),L=s.forwardRef((e,t)=>{let{__scopePopover:a,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:i,disableOutsidePointerEvents:n,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:x,...f}=e,g=k(O,a),b=N(a);return(0,d.Oh)(),(0,r.jsx)(c.n,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:l,onUnmountAutoFocus:i,children:(0,r.jsx)(o.qW,{asChild:!0,disableOutsidePointerEvents:n,onInteractOutside:x,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:h,onDismiss:()=>g.onOpenChange(!1),children:(0,r.jsx)(p.UC,{"data-state":I(g.open),role:"dialog",id:g.contentId,...b,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),q="PopoverClose";function I(e){return e?"open":"closed"}s.forwardRef((e,t)=>{let{__scopePopover:a,...s}=e,i=k(q,a);return(0,r.jsx)(x.sG.button,{type:"button",...s,ref:t,onClick:(0,l.mK)(e.onClick,()=>i.onOpenChange(!1))})}).displayName=q,s.forwardRef((e,t)=>{let{__scopePopover:a,...s}=e,l=N(a);return(0,r.jsx)(p.i3,{...l,...s,ref:t})}).displayName="PopoverArrow";var U=a(96241);let B=_,V=C,G=s.forwardRef(({className:e,align:t="center",sideOffset:a=4,...s},l)=>(0,r.jsx)(A,{children:(0,r.jsx)(T,{ref:l,align:t,sideOffset:a,className:(0,U.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));G.displayName=T.displayName},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,a)=>{"use strict";a.d(t,{bq:()=>p,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>u});var r=a(60687),s=a(43210),l=a(72951),i=a(78272),n=a(3589),o=a(13964),d=a(96241);let c=l.bL;l.YJ;let u=l.WT,p=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.l9.displayName;let m=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));m.displayName=l.PP.displayName;let h=s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})}));h.displayName=l.wn.displayName;let x=s.forwardRef(({className:e,children:t,position:a="popper",...s},i)=>(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[(0,r.jsx)(m,{}),(0,r.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(h,{})]})}));x.displayName=l.UC.displayName,s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=l.JU.displayName;let f=s.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:t})]}));f.displayName=l.q7.displayName,s.forwardRef(({className:e,...t},a)=>(0,r.jsx)(l.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=l.wv.displayName},77008:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(60687),s=a(43210),l=a(55192),i=a(24934),n=a(59821),o=a(70373),d=a(37826),c=a(61240),u=a(63974),p=a(40228),m=a(43649),h=a(99270),x=a(47033),f=a(14952),g=a(11860),b=a(71702),v=a(1797),y=a(41013),j=a(15728),w=a(50848),N=a(68988);let S={fr:{pageTitle:"Journal Administrateur",pageSubtitle:"G\xe9rez les plannings de vos employ\xe9s",weeklyTitle:"Planning Hebdomadaire",weeklySubtitle:"Horaires de travail par employ\xe9 et par jour",thEmployee:"Employ\xe9",filterByRestaurant:"Filtrer par Restaurant",allRestaurants:"Tous les restaurants",selectEmployee:"S\xe9lectionner un Employ\xe9",chooseEmployee:"Choisir un employ\xe9",employeesTitle:"Employ\xe9s",employeesSubtitle:"Cliquez sur un employ\xe9 pour modifier son planning",editorTitle:(e,t)=>`Planning de ${e} ${t}`,editorSubtitle:"D\xe9finissez les horaires de travail pour la semaine et le poste",weekRoleLabel:"Poste pour cette semaine",selectRole:"S\xe9lectionner un poste",selectShift:"S\xe9lectionner un cr\xe9neau",saveSchedule:"Sauvegarder le Planning",days:[{key:"monday",label:"Lundi"},{key:"tuesday",label:"Mardi"},{key:"wednesday",label:"Mercredi"},{key:"thursday",label:"Jeudi"},{key:"friday",label:"Vendredi"},{key:"saturday",label:"Samedi"},{key:"sunday",label:"Dimanche"}],shifts:[{value:"Matin",label:"Matin (09:00 - 18:00)"},{value:"Soir\xe9e",label:"Soir\xe9e (18:00 - 03:00)"},{value:"Doublage",label:"Doublage (09:00 - 03:00)"},{value:"Repos",label:"Repos"}],dash:"-",loading:"Chargement des donn\xe9es...",loadErrorTitle:"Erreur de chargement des donn\xe9es",missingDataTitle:"Erreur: Donn\xe9es manquantes du serveur",missingDataDesc:"V\xe9rifiez la connexion \xe0 la base de donn\xe9es ou contactez l'administrateur.",errTitle:"Erreur",selectEmployeeErr:"Veuillez s\xe9lectionner un employ\xe9",saveOkTitle:"Planning sauvegard\xe9",saveOkDesc:"Le planning a \xe9t\xe9 mis \xe0 jour avec succ\xe8s",saveErrTitle:"Erreur",saveErrDesc:"Impossible de sauvegarder le planning",monthlyPlan:"Planifier le mois",monthlyPlanSubtitle:e=>`Points: 1 = shift simple, 2 = doublage. Mois affich\xe9: ${e}`,legendSimple:"Shift simple",legendDouble:"Doublage",legendRest:"Repos / Non travaill\xe9",selectLocation:"Restaurant",selectShiftShort:"Shift",apply:"Appliquer",clear:"Effacer",confirmPlan:"Confirmer le planning",clearAll:"Vider le mois",prevMonth:"Mois pr\xe9c\xe9dent",nextMonth:"Mois suivant",locationAbbrev:"Rest.",notifPlanOk:"Planning du mois envoy\xe9 \xe0 l'employ\xe9",weeklyPlan:"Planning Hebdo"},ar:{pageTitle:"دفتر المسؤول",pageSubtitle:"إدارة جداول عمل الموظفين",weeklyTitle:"الجدول الأسبوعي",weeklySubtitle:"ساعات العمل لكل موظف ولكل يوم",thEmployee:"الموظف",filterByRestaurant:"تصفية حسب المطعم",allRestaurants:"جميع المطاعم",selectEmployee:"اختيار موظف",chooseEmployee:"اختر موظفًا",employeesTitle:"الموظفون",employeesSubtitle:"انقر على موظف لتعديل جدوله",editorTitle:(e,t)=>`جدول ${e} ${t}`,editorSubtitle:"حدد ساعات العمل للأسبوع والمنصب",weekRoleLabel:"المنصب لهذا الأسبوع",selectRole:"اختر منصبًا",selectShift:"اختر فترة",saveSchedule:"حفظ الجدول",days:[{key:"monday",label:"الإثنين"},{key:"tuesday",label:"الثلاثاء"},{key:"wednesday",label:"الأربعاء"},{key:"thursday",label:"الخميس"},{key:"friday",label:"الجمعة"},{key:"saturday",label:"السبت"},{key:"sunday",label:"الأحد"}],shifts:[{value:"Matin",label:"صباحي (09:00 - 18:00)"},{value:"Soir\xe9e",label:"مسائي (18:00 - 03:00)"},{value:"Doublage",label:"مزدوج (09:00 - 03:00)"},{value:"Repos",label:"راحة"}],dash:"-",loading:"جارٍ تحميل البيانات...",loadErrorTitle:"خطأ في تحميل البيانات",missingDataTitle:"خطأ: بيانات مفقودة من الخادم",missingDataDesc:"تحقق من الاتصال بقاعدة البيانات أو تواصل مع المسؤول.",errTitle:"خطأ",selectEmployeeErr:"يرجى اختيار موظف",saveOkTitle:"تم حفظ الجدول",saveOkDesc:"تم تحديث الجدول بنجاح",saveErrTitle:"خطأ",saveErrDesc:"تعذر حفظ الجدول",monthlyPlan:"تخطيط الشهر",monthlyPlanSubtitle:e=>`النقاط: 1 = فترة واحدة، 2 = مزدوج. الشهر المعروض: ${e}`,legendSimple:"فترة واحدة",legendDouble:"مزدوج",legendRest:"راحة / غير عامل",selectLocation:"مطعم",selectShiftShort:"الفترة",apply:"تطبيق",clear:"مسح",confirmPlan:"تأكيد التخطيط",clearAll:"مسح الشهر",prevMonth:"الشهر السابق",nextMonth:"الشهر التالي",locationAbbrev:"مطعم",notifPlanOk:"تم إرسال تخطيط الشهر للموظف",weeklyPlan:"الجدول الأسبوعي"}};function k(e){let t=e.getFullYear(),a=e.getMonth(),r=new Date(t,a,1),s=new Date(t,a+1,0),l=(r.getDay()+6)%7,i=s.getDate(),n=[];for(let e=0;e<l;e++)n.push(null);for(let e=1;e<=i;e++)n.push(new Date(t,a,e));return{year:t,month:a,first:r,last:s,grid:n,daysInMonth:i}}function _(e){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${r}`}function R(e){if(null==e)return"";if("string"==typeof e){if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;let t=Number(e);if(Number.isFinite(t))return _(new Date(String(e).length>=12?t:1e3*t));let a=Date.parse(e);return Number.isNaN(a)?e:_(new Date(a))}if("number"==typeof e&&Number.isFinite(e))return _(new Date(e));try{let t=new Date(String(e));if(!Number.isNaN(t.getTime()))return _(t)}catch{}return""}function D(e,t=3){return e&&"string"==typeof e&&e.trim()?(e.trim().split(/\s+/).map(e=>e[0]?.toUpperCase()).join("")||e.slice(0,t).toUpperCase()).slice(0,t):""}function C(){let e=S[function(){let[e,t]=(0,s.useState)("fr");return e}()],{toast:t}=(0,b.dj)(),[a,C]=(0,s.useState)(""),[P,E]=(0,s.useState)(""),[M,A]=(0,s.useState)({}),[O,T]=(0,s.useState)(""),[$,z]=(0,s.useState)(""),[F,L]=(0,s.useState)("all"),[q,I]=(0,s.useState)(!1),[U,B]=(0,s.useState)(()=>{let e=new Date;return e.setDate(1),e}),[V,G]=(0,s.useState)({}),[Y,Z]=(0,s.useState)(null),[W,J]=(0,s.useState)(!1),[H,K]=(0,s.useState)(!1),[X,Q]=(0,s.useState)(!1),[ee,et]=(0,s.useState)([]),[ea,er]=(0,s.useState)({}),[es,el]=(0,s.useState)(0),[ei,en]=(0,s.useState)([]),{data:eo,error:ed,loading:ec}=(0,v.I)(w.dO,{fetchPolicy:"cache-first",errorPolicy:"all",notifyOnNetworkStatusChange:!1}),{data:eu,error:ep,loading:em}=(0,v.I)(w.Yh,{fetchPolicy:"cache-first",errorPolicy:"all"}),eh=new Date,ex=new Date(eh);ex.setDate(eh.getDate()-eh.getDay()+1);let ef=new Date(ex);ef.setDate(ex.getDate()+6);let eg=ex.toISOString().slice(0,10),eb=ef.toISOString().slice(0,10),{data:ev,error:ey,loading:ej,refetch:ew}=(0,v.I)(w.Ut,{variables:{start:eg,end:eb},fetchPolicy:"cache-first",errorPolicy:"all"}),[eN,{data:eS}]=(0,y._)(w.gG),[ek]=(0,j.n)(w.Dl),[e_]=(0,j.n)(w.eU),[eR]=(0,j.n)(w.HR),{data:eD,error:eC,loading:eP,refetch:eE}=(0,v.I)(w.ju,{fetchPolicy:"cache-first",errorPolicy:"all"}),eM=(0,s.useMemo)(()=>(eu?.locations??[]).map(e=>({id:String(e.id),name:String(e.name??""),short_name:String(e.short_name??"")})),[eu]),eA=(0,s.useMemo)(()=>eM.slice(0,3),[eM]),eO=e.days,eT=e.shifts,[e$,ez]=(0,s.useState)([]),[eF,eL]=(0,s.useState)(""),eq=(0,s.useMemo)(()=>(eo?.employees??[]).map(e=>({id:e.id,name:`${e.prenom} ${e.nom}`,position:e.job_title,location:e.location?.name||"",job_title:e.job_title,prenom:e.prenom,nom:e.nom,profile:e.profile,locationObj:e.location})),[eo]);(0,s.useMemo)(()=>Array.from(new Set(eq.map(e=>e.job_title).filter(Boolean))),[eq]),(0,s.useMemo)(()=>Array.from(new Set(eq.map(e=>e.location))).filter(Boolean),[eq]);let eI=(0,s.useMemo)(()=>{let e=eq;if(F&&"all"!==F&&(e=e.filter(e=>e.locationObj?.id===F)),$.trim()){let t=$.trim().toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.position?.toLowerCase().includes(t)||e.prenom?.toLowerCase().includes(t)||e.nom?.toLowerCase().includes(t))}return e},[eq,F,$]),eU=(0,s.useMemo)(()=>eI.find(e=>e.id===a),[eI,a]),eB=async r=>{let s=r||a;if(!s){t({title:e.errTitle,description:e.selectEmployeeErr,variant:"destructive"});return}try{J(!0),r&&C(r);let{first:e,last:t}=k(U),a=e.toISOString().slice(0,10),l=t.toISOString().slice(0,10),i=await eN({variables:{employee_id:s,start:a,end:l}}),n=i.data?.workSchedulesRange??[],o={};n.forEach(e=>{if(e?.date){let t=R(e.date);t&&(o[t]={shift:e.shift_type??"Repos",location_id:"Repos"===e.shift_type?"0":e.location_id?.toString()??void 0,job_position:e.job_position??void 0})}}),G(o),I(!0)}finally{J(!1)}},eV=e=>{let t=new Date(U);t.setMonth(t.getMonth()+e),B(t),Z(null)},eG=(e,t)=>{G(a=>{let r={...a};return t?"Repos"===t.shift?r[e]={...t,location_id:"0"}:r[e]=t:delete r[e],r}),Z(null)},eY=async()=>{if(!a){t({title:e.errTitle,description:e.selectEmployeeErr,variant:"destructive"});return}try{let r=Object.entries(V);if(0===r.length){I(!1),await ew();return}let s=eU?.locationObj?.id||eM[0]?.id;if(!s){t({title:e.saveErrTitle,description:"Aucun restaurant trouv\xe9 pour cet employ\xe9",variant:"destructive"});return}let l=r.map(([e,t])=>{let r=R(e);if(!r)return null;let l=null,i=null,n=!0;"Matin"===t.shift?(l="09:00",i="18:00"):"Soir\xe9e"===t.shift?(l="18:00",i="03:00"):"Doublage"===t.shift?(l="09:00",i="03:00"):(l=null,i=null,n=!1);let o="Repos"===t.shift?"0":t.location_id&&"0"!==t.location_id?String(t.location_id):String(s),d=new Date(r).toLocaleDateString("en-US",{weekday:"long"});return{employee_id:String(a),date:r,start_time:l,end_time:i,shift_type:t.shift,job_position:O||eU?.job_title||"",is_working:n,location_id:o,day:d,retard:null,status:"noactive"}}).filter(Boolean);await ek({variables:{employee_id:a,schedules:l}});let i=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}`;await eR({variables:{employee_id:a,month:i}}),t({title:e.saveOkTitle,description:e.notifPlanOk});let{first:n,last:o}=k(U),d=n.toISOString().slice(0,10),c=o.toISOString().slice(0,10),u=await eN({variables:{employee_id:a,start:d,end:c}}),p=u.data?.workSchedulesRange??[],m={};p.forEach(e=>{if(e?.date){let t=R(e.date);t&&(m[t]={shift:e.shift_type??"Repos",location_id:"Repos"===e.shift_type?"0":e.location_id?.toString()??void 0,job_position:e.job_position??void 0})}}),G(m),await ew()}catch(a){console.error("Error saving month schedule:",a),t({title:e.saveErrTitle,description:e.saveErrDesc,variant:"destructive"})}},eZ=async()=>{if(!a||0===Object.keys(V).length){t({title:e.errTitle,description:"Veuillez s\xe9lectionner un employ\xe9 et d\xe9finir un planning pour le mois actuel",variant:"destructive"});return}try{J(!0);let r=new Date(U);r.setMonth(r.getMonth()+1);let{first:s,last:l}=k(r),i=eU?.locationObj?.id||eM[0]?.id;if(!i){t({title:e.saveErrTitle,description:"Aucun restaurant trouv\xe9 pour cet employ\xe9",variant:"destructive"});return}let n=[];for(let e=1;e<=l.getDate();e++){let t=new Date(r.getFullYear(),r.getMonth(),e),s=t.getDay(),l=Object.entries(V).find(([e,t])=>new Date(e.split("-").map(Number)).getDay()===s);if(l){let[e,r]=l,s=_(t),o=null,d=null,c=!0;"Matin"===r.shift?(o="09:00",d="18:00"):"Soir\xe9e"===r.shift?(o="18:00",d="03:00"):"Doublage"===r.shift?(o="09:00",d="03:00"):(o=null,d=null,c=!1);let u="Repos"===r.shift?"0":r.location_id&&"0"!==r.location_id?String(r.location_id):String(i),p=t.toLocaleDateString("en-US",{weekday:"long"});n.push({employee_id:String(a),date:s,start_time:o,end_time:d,shift_type:r.shift,job_position:O||eU?.job_title||"",is_working:c,location_id:u,day:p,retard:null,status:"active"})}}if(n.length>0){await ek({variables:{employee_id:a,schedules:n}});let e=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;await eR({variables:{employee_id:a,month:e}}),t({title:"Succ\xe8s",description:`Planning appliqu\xe9 au mois prochain (${r.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})`})}}catch(a){console.error("Error applying to next month:",a),t({title:e.saveErrTitle,description:"Erreur lors de l'application au mois prochain",variant:"destructive"})}finally{J(!1)}},eW=async()=>{if(!a||0===Object.keys(V).length){t({title:e.errTitle,description:"Veuillez s\xe9lectionner un employ\xe9 et d\xe9finir un planning pour le mois actuel",variant:"destructive"});return}try{J(!0);let r=eU?.locationObj?.id||eM[0]?.id;if(!r){t({title:e.saveErrTitle,description:"Aucun restaurant trouv\xe9 pour cet employ\xe9",variant:"destructive"});return}let s=U.getFullYear();for(let e=0;e<12;e++){let t=new Date(s,e,1),{last:l}=k(t),i=[];for(let t=1;t<=l.getDate();t++){let l=new Date(s,e,t),n=l.getDay(),o=Object.entries(V).find(([e,t])=>new Date(e.split("-").map(Number)).getDay()===n);if(o){let[e,t]=o,s=_(l),n=null,d=null,c=!0;"Matin"===t.shift?(n="09:00",d="18:00"):"Soir\xe9e"===t.shift?(n="18:00",d="03:00"):"Doublage"===t.shift?(n="09:00",d="03:00"):(n=null,d=null,c=!1);let u="Repos"===t.shift?"0":t.location_id&&"0"!==t.location_id?String(t.location_id):String(r),p=l.toLocaleDateString("en-US",{weekday:"long"});i.push({employee_id:String(a),date:s,start_time:n,end_time:d,shift_type:t.shift,job_position:O||eU?.job_title||"",is_working:c,location_id:u,day:p,retard:null,status:"active"})}}if(i.length>0){await ek({variables:{employee_id:a,schedules:i}});let t=`${s}-${String(e+1).padStart(2,"0")}`;await eR({variables:{employee_id:a,month:t}})}}t({title:"Succ\xe8s",description:`Planning appliqu\xe9 \xe0 toute l'ann\xe9e ${s}`})}catch(a){console.error("Error applying to entire year:",a),t({title:e.saveErrTitle,description:"Erreur lors de l'application \xe0 l'ann\xe9e",variant:"destructive"})}finally{J(!1)}};return(0,s.useMemo)(()=>{let e=_(new Date),t={};if(eo?.employees&&ev?.allUserWorkSchedules){let a=eo.employees,r=ev.allUserWorkSchedules;a.forEach(a=>{r.find(t=>String(t.employee_id)===String(a.id)&&R(t.date)===e)||(t[a.id]=!0)})}return t},[eo,ev]),(0,s.useMemo)(()=>()=>{let e=Date.now();return e-es<3e4?Promise.resolve():(el(e),ew())},[ew,es]),(0,r.jsxs)("div",{className:"min-h-screen relative overflow-hidden",dir:"ltr",children:[(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-0",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/80 via-purple-900/60 to-slate-900/80 backdrop-blur-[6px]"}),[...Array(20)].map((e,t)=>(0,r.jsx)("div",{className:"absolute w-1 h-1 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full opacity-30 animate-float",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`,animationDelay:`${6*Math.random()}s`,animationDuration:`${6+4*Math.random()}s`}},t))]}),(0,r.jsxs)("div",{className:"space-y-6 p-4 relative z-20 max-w-full mx-auto",children:[(0,r.jsxs)("div",{className:"glass-card backdrop-blur-futuristic p-4 lg:p-6 text-white shadow-2xl animate-fade-in relative overflow-hidden border border-white/10",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/30 via-purple-900/40 to-blue-900/30 opacity-70 rounded-2xl"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] animate-[shimmer_3s_ease-in-out_infinite] rounded-2xl"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 relative z-10",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-700/40 to-purple-700/40 rounded-xl flex items-center justify-center border border-white/10 flex-shrink-0",children:(0,r.jsx)(p.A,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-1 bg-gradient-to-r from-white via-blue-200 to-purple-200 bg-clip-text text-transparent",dir:"auto",children:e.pageTitle}),(0,r.jsx)("p",{className:"text-slate-200 text-sm md:text-base",dir:"auto",children:e.pageSubtitle})]}),Object.keys(ea).length>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-orange-600/20 border border-orange-500/30 rounded-lg px-3 py-2 w-full sm:w-auto",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-400 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-sm min-w-0",children:[(0,r.jsxs)("div",{className:"text-orange-200 font-medium",children:[Object.keys(ea).length," employ\xe9(s)"]}),(0,r.jsx)("div",{className:"text-orange-300 text-xs truncate",children:"Besoin d'assignation restaurant"})]})]})]})]}),(0,r.jsxs)(l.Zp,{className:"glass-card backdrop-blur-futuristic border-0 shadow-2xl",children:[(0,r.jsx)(l.aR,{className:"pb-4",children:(0,r.jsx)(l.ZB,{className:"text-white text-lg sm:text-xl",dir:"auto",children:e.filters||"Filtres"})}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(h.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,r.jsx)(N.p,{placeholder:e.searchPlaceholder||"Rechercher par nom...",value:$,onChange:e=>z(e.target.value),className:"pl-10 glass-card backdrop-blur-futuristic bg-slate-800/50 border-slate-600 text-white placeholder:text-slate-400"})]})}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)(u.l6,{value:F,onValueChange:L,children:[(0,r.jsx)(u.bq,{className:"w-full glass-card backdrop-blur-futuristic bg-slate-800/50 border-slate-600 text-white",children:(0,r.jsx)(u.yv,{placeholder:e.restaurant||"Restaurant"})}),(0,r.jsxs)(u.gC,{className:"glass-card backdrop-blur-futuristic bg-slate-900/95 border-slate-700 shadow-xl",children:[(0,r.jsx)(u.eb,{value:"all",className:"text-white hover:bg-slate-800/80 focus:bg-slate-800/80",children:(0,r.jsx)("span",{dir:"auto",children:e.allRestaurants||"Tous les restaurants"})}),eM.map(e=>(0,r.jsx)(u.eb,{value:e.id,className:"text-white hover:bg-slate-800/80 focus:bg-slate-800/80",children:(0,r.jsx)("span",{dir:"auto",children:e.name})},e.id))]})]})})})]})})]}),(0,r.jsxs)(l.Zp,{className:"glass-card backdrop-blur-futuristic border border-white/10 shadow-2xl bg-gradient-to-br from-slate-900/70 via-purple-900/60 to-slate-900/70",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{dir:"auto",children:e.weeklyTitle}),(0,r.jsx)(l.BT,{dir:"auto",children:e.weeklySubtitle})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse text-white",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left p-3 font-semibold",dir:"auto",children:e.thEmployee}),eO.map(e=>(0,r.jsx)("th",{className:"text-center p-3 font-semibold",dir:"auto",children:e.label},e.key))]})}),(0,r.jsx)("tbody",{children:eI.map(t=>{let a=ea[t.id];return(0,r.jsxs)("tr",{className:`border-b hover:bg-white/5 transition-colors ${a?"bg-orange-900/20 border-orange-500/30":""}`,children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(o.eu,{className:"w-8 h-8",children:(0,r.jsx)(o.q5,{className:"text-xs bg-gradient-to-br from-blue-700/60 to-purple-700/60 text-white",children:t.name.split(" ").map(e=>e[0]).join("")})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("p",{className:"font-medium text-sm truncate",dir:"auto",children:t.name}),a&&(0,r.jsx)(m.A,{className:"w-4 h-4 text-orange-400 flex-shrink-0"})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground truncate",dir:"auto",children:t.position||e.dash}),(0,r.jsx)("div",{className:"mt-2 flex gap-2",children:(0,r.jsx)(i.$,{size:"sm",variant:"secondary",className:`${a?"bg-orange-700/40 hover:bg-orange-700/50 text-orange-100 border border-orange-500/40":"bg-emerald-700/30 hover:bg-emerald-700/40 text-emerald-100 border border-emerald-500/30"}`,onClick:()=>{eB(t.id)},children:a?"Planning Urgent":"Planning"})})]})]})}),eO.map(s=>{let l=function(e,t){if(!eD?.weeklyTemplateSchedules)return null;let a=eD.weeklyTemplateSchedules.find(a=>String(a.employee_id)===String(e)&&a.day?.toLowerCase()===t.toLowerCase());return a&&String(a.employee_id)!==String(e)?null:a?{shift:a.shift_type,job:a.job_position,location_id:a.location_id}:null}(t.id,s.key),i=(new Date().getDay()+6)%7,o=eO.findIndex(e=>e.key===s.key)===i,d=o&&a;return(0,r.jsxs)("td",{className:`text-center p-3 ${d?"bg-orange-900/30 border border-orange-500/30 rounded":""}`,children:[l?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(n.E,{variant:"Repos"===l.shift?"outline":"default",className:`text-xs ${"Matin"===l.shift?"bg-blue-700/30 text-blue-200":"Soir\xe9e"===l.shift?"bg-purple-700/30 text-purple-200":"Doublage"===l.shift?"bg-orange-700/30 text-orange-200":"Repos"===l.shift?"bg-gray-700/30 text-gray-200 border-gray-500/50":"bg-slate-700/30 text-slate-200"}`,children:l.shift}),l.job&&"Repos"!==l.shift&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:l.job}),"Repos"===l.shift&&(0,r.jsx)("div",{className:"text-xs font-bold text-gray-300",children:"REP"})]}):(0,r.jsx)("span",{className:"text-muted-foreground text-xs",children:e.dash}),o&&t.location&&l?.shift!=="Repos"&&(0,r.jsx)("div",{className:"text-xs text-blue-300 mt-1",children:D(t.location.name,3)})]},s.key)})]},t.id)})})]})})})]})]}),(0,r.jsx)(d.lG,{open:q,onOpenChange:I,children:(0,r.jsxs)(d.Cf,{className:"w-[98vw] max-w-6xl mx-auto max-h-[95vh] overflow-y-auto glass-card bg-gradient-to-br from-slate-900/95 via-slate-900/90 to-slate-900/95 border border-white/10 text-white p-0",children:[(0,r.jsxs)(d.c7,{className:"sticky top-0 z-10 bg-gradient-to-b from-slate-900/95 via-slate-900/90 to-slate-900/80 backdrop-blur-md border-b border-white/10 px-4 py-4",children:[(0,r.jsx)(d.L3,{children:eU?`Planning du mois — ${eU.prenom} ${eU.nom}`:e.monthlyPlan}),(0,r.jsx)(d.rr,{children:e.monthlyPlanSubtitle(eF)}),a&&ea[a]&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-orange-600/20 border border-orange-500/30 rounded-lg px-3 py-2 mt-2",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 text-orange-400"}),(0,r.jsx)("span",{className:"text-sm text-orange-200",children:"Cet employ\xe9 a besoin d'une assignation restaurant pour aujourd'hui"})]})]}),(0,r.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"inline-block w-2.5 h-2.5 rounded-full bg-emerald-400"}),(0,r.jsx)("span",{className:"text-xs text-slate-300",children:e.legendSimple})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"inline-flex flex-col gap-0.5",children:[(0,r.jsx)("span",{className:"block w-2.5 h-2 rounded-full bg-cyan-400"}),(0,r.jsx)("span",{className:"block w-2.5 h-2 rounded-full bg-cyan-400"})]}),(0,r.jsx)("span",{className:"text-xs text-slate-300",children:e.legendDouble})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"inline-block w-2.5 h-2.5 rounded-full bg-slate-500"}),(0,r.jsx)("span",{className:"text-xs text-slate-300",children:e.legendRest})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eV(-1),"aria-label":e.prevMonth,children:(0,r.jsx)(x.A,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"px-3 py-1.5 rounded-md bg-white/5 border border-white/10 text-sm",children:eF}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eV(1),"aria-label":e.nextMonth,children:(0,r.jsx)(f.A,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1 text-xs text-slate-400 mb-2",children:[(0,r.jsx)("div",{className:"text-center",children:"Lun"}),(0,r.jsx)("div",{className:"text-center",children:"Mar"}),(0,r.jsx)("div",{className:"text-center",children:"Mer"}),(0,r.jsx)("div",{className:"text-center",children:"Jeu"}),(0,r.jsx)("div",{className:"text-center",children:"Ven"}),(0,r.jsx)("div",{className:"text-center",children:"Sam"}),(0,r.jsx)("div",{className:"text-center",children:"Dim"})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:e$.map((t,s)=>{if(!t)return(0,r.jsx)("div",{},`empty-${s}`);let l=_(t),n=V[l],o=n?.shift,d=l===_(new Date),p=d&&a&&ea[a];return(0,r.jsxs)(c.AM,{open:Y===l,onOpenChange:e=>Z(e?l:null),children:[(0,r.jsx)(c.Wv,{asChild:!0,children:(0,r.jsxs)("button",{className:`relative rounded-lg px-1 pt-2 pb-4 text-left transition-colors h-16 sm:h-20 w-full ${p?"bg-orange-600/20 hover:bg-orange-600/30 border-2 border-orange-500/50 animate-pulse":d?"bg-blue-600/20 hover:bg-blue-600/30 border-2 border-blue-500/50":"bg-white/5 hover:bg-white/10 border border-white/10"}`,onClick:()=>Z(l),children:[(0,r.jsx)("span",{className:`text-xs font-medium block ${p?"text-orange-200":d?"text-blue-200":"text-slate-200"}`,children:t.getDate()}),d&&(0,r.jsx)("span",{className:"absolute top-1 right-1 w-1.5 h-1.5 bg-blue-400 rounded-full"}),p&&(0,r.jsx)(m.A,{className:"absolute top-1 right-1 w-3 h-3 text-orange-400"}),(0,r.jsx)("div",{className:"absolute left-1 bottom-1 flex flex-col items-start gap-0.5",children:"Doublage"===o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.6)]"}),(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.6)]"})]}):"Matin"===o||"Soir\xe9e"===o?(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-400 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}):"Repos"===o?(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-slate-500 shadow-[0_0_8px_rgba(100,116,139,0.6)]"}):null}),n?.location_id&&n?.location_id!=="0"&&(0,r.jsx)("span",{className:"absolute right-1 bottom-1 text-[9px] px-1 py-0.5 rounded-md bg-slate-800/70 text-slate-100 border border-white/10",title:eM.find(e=>e.id===n.location_id)?.name??"","aria-label":`Restaurant ${eM.find(e=>e.id===n.location_id)?.name??""}`,children:D(eM.find(e=>e.id===n.location_id)?.name??"",3)}),(n?.location_id==="0"||n?.shift==="Repos")&&(0,r.jsx)("span",{className:"absolute right-1 bottom-1 text-[10px] font-bold text-white bg-gray-600/80 px-1 rounded",title:"Repos",children:"REP"})]})}),(0,r.jsx)(c.hl,{className:"w-80 p-0 bg-gradient-to-br from-slate-900/95 to-slate-900/95 border border-white/10 text-white",children:(0,r.jsxs)("div",{className:"p-3 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-slate-300",children:new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"2-digit",month:"long"}).format(t)}),(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>Z(null),children:(0,r.jsx)(g.A,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:e.selectShiftShort}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:eT.map(e=>(0,r.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>eG(l,{shift:e.value,location_id:"Repos"===e.value?0:eU?.locationObj?.id,job_position:eU?.job_title}),className:`text-xs h-8 ${n?.shift===e.value?"bg-blue-600/30 border-blue-500/50 text-blue-200":"bg-white/5 border-white/10 text-slate-300 hover:bg-white/10"}`,children:e.value},e.value))})]}),eA.length>0&&n?.shift!=="Repos"&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:e.selectLocation}),(0,r.jsxs)(u.l6,{value:n?.location_id&&n?.location_id!=="0"?n.location_id:"",onValueChange:e=>{n&&eG(l,{...n,location_id:e})},children:[(0,r.jsx)(u.bq,{className:"h-8 text-xs bg-white/5 border-white/10 text-white",children:(0,r.jsx)(u.yv,{placeholder:"Choisir restaurant"})}),(0,r.jsx)(u.gC,{className:"bg-slate-900 border-white/10",children:eA.map(e=>(0,r.jsx)(u.eb,{value:e.id,className:"text-white hover:bg-white/10",children:e.name},e.id))})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,r.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>eG(l,null),className:"flex-1 h-8 text-xs bg-white/5 border-white/10 text-slate-300 hover:bg-white/10",children:e.clear}),(0,r.jsx)(i.$,{size:"sm",onClick:()=>Z(null),className:"flex-1 h-8 text-xs bg-blue-600 hover:bg-blue-700 text-white",children:e.apply})]})]})})]},l)})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[(0,r.jsx)(i.$,{variant:"outline",onClick:()=>{G({}),Z(null)},className:"text-slate-300 border-white/20 hover:bg-white/10 bg-transparent",children:e.clearAll}),(0,r.jsx)(i.$,{variant:"outline",className:"text-slate-300 border-white/20 hover:bg-white/10 bg-transparent",onClick:eZ,disabled:W,children:"mois prochain"}),(0,r.jsx)(i.$,{variant:"outline",className:"text-slate-300 border-white/20 hover:bg-white/10 bg-transparent",onClick:eW,disabled:W,children:"ann\xe9e"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.$,{variant:"outline",onClick:()=>I(!1),className:"text-slate-300 border-white/20 hover:bg-white/10 bg-transparent",children:"Annuler"}),(0,r.jsx)(i.$,{onClick:eY,disabled:W,className:"bg-blue-600 hover:bg-blue-700 text-white",children:W?"Sauvegarde...":e.confirmPlan})]})]})]})]})})]})}},87269:(e,t,a)=>{Promise.resolve().then(a.bind(a,19166))},99270:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(62688).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[7719,9922,4774,5806,4803,1536,972,4537],()=>a(48789));module.exports=r})();