(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4976],{31388:(e,s,t)=>{Promise.resolve().then(t.bind(t,87543))},82714:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var a=t(95155),r=t(12115),l=t(40968),i=t(74466),n=t(53999);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,n.cn)(c(),t),...r})});d.displayName=l.b.displayName},87543:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(95155),r=t(12115),l=t(77685),i=t(34998),n=t(55868),c=t(17580),d=t(47924),o=t(4229),m=t(54416),x=t(13717),u=t(88482),b=t(97168),h=t(89852),p=t(82714),g=t(41397),f=t(39514),v=t(56671),N=t(80154);let j={fr:{headerTitle:"Finance \xc9quipe",headerSubtitle:"G\xe9rez les finances de votre \xe9quipe",sectionTitle:"Gestion Financi\xe8re Employ\xe9s",sectionSubtitle:"Modifiez les salaires, primes et sanctions",searchPlaceholder:"Rechercher un employ\xe9...",salary:"Salaire",bonus:"Prime",advance:"Avance",infractions:"Infractions",absences:"Absences",lates:"Retards",save:"Sauver",cancel:"Annuler",edit:"Modifier",performance:"Performance",emptyTitle:"Aucun employ\xe9 trouv\xe9",emptyDescFiltered:"Aucun employ\xe9 ne correspond \xe0 votre recherche.",emptyDescAll:"Aucun employ\xe9 disponible.",toastSaved:"Employ\xe9 mis \xe0 jour avec succ\xe8s",toastError:"Erreur lors de la mise \xe0 jour",currency:"DT"},ar:{headerTitle:"مالية الفريق",headerSubtitle:"إدارة الشؤون المالية لفريقك",sectionTitle:"الإدارة المالية للموظفين",sectionSubtitle:"تعديل الرواتب والمنح والعقوبات",searchPlaceholder:"ابحث عن موظف...",salary:"الراتب",bonus:"المنحة",advance:"السلفة",infractions:"المخالفات",absences:"الغيابات",lates:"التأخيرات",save:"حفظ",cancel:"إلغاء",edit:"تعديل",performance:"الأداء",emptyTitle:"لا يوجد موظفون",emptyDescFiltered:"لا يوجد موظفون يطابقون بحثك.",emptyDescAll:"لا يوجد موظفون متاحون.",toastSaved:"تم تحديث الموظف بنجاح",toastError:"حدث خطأ أثناء التحديث",currency:"د.ت"}};function w(){let{lang:e}=(0,N.uU)(),s=j[e],t=(0,r.useMemo)(()=>new Intl.NumberFormat("ar"===e?"ar-TN":"fr-TN"),[e]),[w,y]=(0,r.useState)(""),[A,C]=(0,r.useState)(null),[k,S]=(0,r.useState)({}),{data:T,refetch:_}=(0,l.I)(f.dO),[D]=(0,i.n)(f.Dx),E=((null==T?void 0:T.employees)||[]).filter(e=>e.nom.toLowerCase().includes(w.toLowerCase())||e.prenom.toLowerCase().includes(w.toLowerCase())||(e.job_title||"").toLowerCase().includes(w.toLowerCase())),I=e=>{S({salaire:e.salaire||0,prime:e.prime||0,avance:e.avance||0,infractions:e.infractions||0,absence:e.absence||0,retard:e.retard||0}),C(e)},M=async()=>{try{await D({variables:{id:A.id,...k}}),v.oR.success(s.toastSaved),C(null),_()}catch(e){v.oR.error(s.toastError),console.error("Error updating employee:",e)}},z=()=>{C(null),S({})},F=e=>{let{amount:r}=e;return(0,a.jsxs)("span",{dir:"ltr",className:"tabular-nums",children:[t.format(r)," ",s.currency]})};return(0,a.jsxs)("div",{className:"min-h-screen relative overflow-hidden animate-fade-in",children:[(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-0",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/80 via-blue-900/60 to-slate-900/80 backdrop-blur-[6px]"}),[...Array(20)].map((e,s)=>(0,a.jsx)("div",{className:"absolute w-1 h-1 bg-gradient-to-r from-blue-400 to-green-400 rounded-full opacity-30 animate-float",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(6*Math.random(),"s"),animationDuration:"".concat(6+4*Math.random(),"s")}},s))]}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6 p-3 sm:p-4 lg:p-6 relative z-20 max-w-screen-xl mx-auto",children:[(0,a.jsxs)("div",{className:"glass-card backdrop-blur-futuristic p-4 sm:p-6 lg:p-8 text-white shadow-2xl animate-fade-in relative overflow-hidden border border-white/10",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/30 via-green-900/40 to-blue-900/30 opacity-70 rounded-2xl"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] animate-[shimmer_3s_ease-in-out_infinite] rounded-2xl"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 relative z-10",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-700/40 to-green-700/40 rounded-xl flex items-center justify-center border border-white/10",children:(0,a.jsx)(n.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-1 bg-gradient-to-r from-white via-blue-200 to-green-200 bg-clip-text text-transparent",dir:"auto",children:s.headerTitle}),(0,a.jsx)("p",{className:"text-slate-200 text-xs sm:text-sm lg:text-base",dir:"auto",children:s.headerSubtitle})]})]})]}),(0,a.jsxs)(u.Zp,{className:"glass-card backdrop-blur-futuristic border border-white/10 shadow-2xl bg-gradient-to-br from-slate-900/70 via-blue-900/60 to-slate-900/70",children:[(0,a.jsxs)(u.aR,{className:"p-4 sm:p-6",children:[(0,a.jsxs)(u.ZB,{className:"flex items-center text-base sm:text-lg text-white",dir:"auto",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),s.sectionTitle]}),(0,a.jsx)(u.BT,{className:"text-blue-200",dir:"auto",children:s.sectionSubtitle})]}),(0,a.jsxs)(u.Wu,{className:"p-4 sm:p-6 pt-0",children:[(0,a.jsxs)("div",{className:"relative mb-4 sm:mb-6",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-200 w-4 h-4"}),(0,a.jsx)(h.p,{placeholder:s.searchPlaceholder,value:w,onChange:e=>y(e.target.value),className:"pl-10 text-sm h-10 sm:h-12 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white placeholder:text-blue-200"})]}),(0,a.jsx)("div",{className:"space-y-3 sm:space-y-4",children:E.map(e=>(0,a.jsxs)("div",{className:"border border-white/10 rounded-xl p-4 sm:p-6 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 hover:bg-blue-900/60 transition-colors",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-700/40 to-green-700/40 rounded-lg flex items-center justify-center flex-shrink-0 border border-white/10",children:(0,a.jsx)(c.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("h3",{className:"text-sm sm:text-base font-semibold text-white mb-1 truncate",dir:"auto",children:[e.prenom," ",e.nom]}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-blue-200",dir:"auto",children:e.job_title})]})]}),(null==A?void 0:A.id)===e.id?(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-4 w-full lg:w-auto lg:min-w-[400px]",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(p.J,{className:"text-xs font-medium text-white",dir:"auto",children:s.salary}),(0,a.jsx)(h.p,{type:"number",value:k.salaire,onChange:e=>S({...k,salaire:Number.parseInt(e.target.value)||0}),className:"text-xs h-8 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(p.J,{className:"text-xs font-medium text-white",dir:"auto",children:s.bonus}),(0,a.jsx)(h.p,{type:"number",value:k.prime,onChange:e=>S({...k,prime:Number.parseInt(e.target.value)||0}),className:"text-xs h-8 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(p.J,{className:"text-xs font-medium text-white",dir:"auto",children:s.advance}),(0,a.jsx)(h.p,{type:"number",value:k.avance,onChange:e=>S({...k,avance:Number.parseInt(e.target.value)||0}),className:"text-xs h-8 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(p.J,{className:"text-xs font-medium text-white",dir:"auto",children:s.infractions}),(0,a.jsx)(h.p,{type:"number",value:k.infractions,onChange:e=>S({...k,infractions:Number.parseInt(e.target.value)||0}),className:"text-xs h-8 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(p.J,{className:"text-xs font-medium text-white",dir:"auto",children:s.absences}),(0,a.jsx)(h.p,{type:"number",value:k.absence,onChange:e=>S({...k,absence:Number.parseInt(e.target.value)||0}),className:"text-xs h-8 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(p.J,{className:"text-xs font-medium text-white",dir:"auto",children:s.lates}),(0,a.jsx)(h.p,{type:"number",value:k.retard,onChange:e=>S({...k,retard:Number.parseInt(e.target.value)||0}),className:"text-xs h-8 glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(b.$,{onClick:M,size:"sm",className:"glass-card bg-gradient-to-br from-green-700/40 to-blue-700/40 text-white border border-white/10 text-xs",children:[(0,a.jsx)(o.A,{className:"w-3 h-3 mr-1"}),s.save]}),(0,a.jsxs)(b.$,{onClick:z,variant:"outline",size:"sm",className:"glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white text-xs",children:[(0,a.jsx)(m.A,{className:"w-3 h-3 mr-1"}),s.cancel]})]})]}):(0,a.jsxs)("div",{className:"space-y-3 w-full lg:w-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold text-white",children:(0,a.jsx)(F,{amount:e.salaire||0})}),(0,a.jsx)("div",{className:"text-xs text-blue-200",dir:"auto",children:s.salary})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold text-green-400",children:(0,a.jsx)(F,{amount:e.prime||0})}),(0,a.jsx)("div",{className:"text-xs text-blue-200",dir:"auto",children:s.bonus})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold text-cyan-400",children:(0,a.jsx)(F,{amount:e.avance||0})}),(0,a.jsx)("div",{className:"text-xs text-blue-200",dir:"auto",children:s.advance})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold text-red-400",children:e.infractions||0}),(0,a.jsx)("div",{className:"text-xs text-blue-200",dir:"auto",children:s.infractions})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold text-orange-400",children:e.absence||0}),(0,a.jsx)("div",{className:"text-xs text-blue-200",dir:"auto",children:s.absences})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm sm:text-base font-bold text-yellow-400",children:e.retard||0}),(0,a.jsx)("div",{className:"text-xs text-blue-200",dir:"auto",children:s.lates})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(b.$,{onClick:()=>I(e),variant:"outline",size:"sm",className:"glass-card bg-gradient-to-br from-blue-900/40 to-green-900/40 border border-white/10 text-white text-xs sm:text-sm h-8 sm:h-10",children:[(0,a.jsx)(x.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),s.edit]})})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium text-blue-200",dir:"auto",children:s.performance}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm font-bold text-white",children:[Math.max(0,100-(5*(e.infractions||0)+3*(e.absence||0)+2*(e.retard||0))),"%"]})]}),(0,a.jsx)(g.k,{value:Math.max(0,100-(5*(e.infractions||0)+3*(e.absence||0)+2*(e.retard||0))),className:"h-2 bg-gradient-to-r from-green-400 via-blue-400 to-cyan-400"})]})]},e.id))}),0===E.length&&(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,a.jsx)(c.A,{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto text-blue-200/50 mb-4"}),(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-white mb-2",dir:"auto",children:s.emptyTitle}),(0,a.jsx)("p",{className:"text-sm text-blue-200",dir:"auto",children:w?s.emptyDescFiltered:s.emptyDescAll})]})]})]})]})]})}},89852:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(95155),r=t(12115),l=t(53999);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});i.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[7477,8916,3511,6494,5516,4432,8441,1684,7358],()=>s(31388)),_N_E=e.O()}]);